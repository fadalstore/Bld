<!DOCTYPE html>
<html lang="so-SO">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gal ama Isciilaad - Lacag ka Hel Su'aalaha</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4270866898297862" crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">
        <div class="back-home">
            <a href="index.html">‚Üê Ku noqo Website-ka</a>
        </div>

        <div class="auth-container">
            <h2 style="text-align: center; color: #667eea; margin-bottom: 2rem;">
                üîê Gal Ama Isciilaad Samee
            </h2>

            <div class="success-message" id="success-message"></div>
            <div class="error-message" id="error-message"></div>

            <!-- Login Form -->
            <form class="auth-form active" id="login-form">
                <h3 style="color: #333; margin-bottom: 1rem;">üö™ Gal</h3>

                <div class="form-group">
                    <label for="login-email">Email:</label>
                    <input type="email" id="login-email" name="email" required placeholder="example@email.com">
                </div>

                <div class="form-group">
                    <label for="login-password">Password:</label>
                    <input type="password" id="login-password" name="password" required placeholder="Password-kaaga">
                </div>

                <button type="submit" class="auth-button">üîì Gal</button>

                <div class="toggle-form" onclick="toggleForm()">
                    Account ma lihid? Halkan riix si aad isciilaad u samayso
                </div>
            </form>

            <!-- Register Form -->
            <form class="auth-form" id="register-form">
                <h3 style="color: #333; margin-bottom: 1rem;">üìù Isciilaad Samee</h3>

                <div class="form-group">
                    <label for="register-name">Magacaaga:</label>
                    <input type="text" id="register-name" name="name" required placeholder="Magacaaga oo dhan">
                </div>

                <div class="form-group">
                    <label for="register-email">Email:</label>
                    <input type="email" id="register-email" name="email" required placeholder="example@email.com">
                </div>

                <div class="form-group">
                    <label for="register-phone">Telefoon (Ikhtiyaari):</label>
                    <input type="tel" id="register-phone" name="phone" placeholder="+252-XX-XXXXXXX">
                </div>

                <div class="form-group">
                    <label for="register-password">Password:</label>
                    <input type="password" id="register-password" name="password" required placeholder="Ugu yaraan 6 xaraf">
                </div>

                <div class="form-group">
                    <label for="register-confirm">Ku celi Password-ka:</label>
                    <input type="password" id="register-confirm" name="confirm" required placeholder="Password-ka mar kale gali">
                </div>

                <button type="submit" class="auth-button">‚úÖ Isciilaad Samee</button>

                <div class="toggle-form" onclick="toggleForm()">
                    Account ma leedahay? Halkan riix si aad u gasho
                </div>
            </form>
        </div>
    </div>

    <script>
        function toggleForm() {
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');

            loginForm.classList.toggle('active');
            registerForm.classList.toggle('active');
        }

        function showMessage(message, isError = false) {
            const successDiv = document.getElementById('success-message');
            const errorDiv = document.getElementById('error-message');

            if (isError) {
                errorDiv.textContent = message;
                errorDiv.style.display = 'block';
                successDiv.style.display = 'none';
            } else {
                successDiv.textContent = message;
                successDiv.style.display = 'block';
                errorDiv.style.display = 'none';
            }

            setTimeout(() => {
                successDiv.style.display = 'none';
                errorDiv.style.display = 'none';
            }, 5000);
        }

        // Handle Login
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            // Check stored users
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const user = users.find(u => u.email === email && u.password === password);

            if (user) {
                localStorage.setItem('currentUser', JSON.stringify(user));
                showMessage('‚úÖ Si guul leh ayaad u galatay!');
                setTimeout(() => {
                    window.location.href = 'dashboard.html';
                }, 2000);
            } else {
                showMessage('‚ùå Email ama password qalad ah!', true);
            }
        });

        // Handle Register
        document.getElementById('register-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            const phone = document.getElementById('register-phone').value;
            const password = document.getElementById('register-password').value;
            const confirm = document.getElementById('register-confirm').value;

            if (password !== confirm) {
                showMessage('‚ùå Passwords-yadu ma isku mid aha!', true);
                return;
            }

            if (password.length < 6) {
                showMessage('‚ùå Password-ku waa inuu ugu yaraan 6 xaraf yahay!', true);
                return;
            }

            // Check if email already exists
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            if (users.find(u => u.email === email)) {
                showMessage('‚ùå Email-kan horay ayaa loo isticmaalay!', true);
                return;
            }

            // Create new user
            const newUser = {
                id: Date.now(),
                name: name,
                email: email,
                phone: phone,
                password: password,
                joinDate: new Date().toLocaleDateString('so-SO'),
                totalEarned: 0,
                completedSurveys: 0
            };

            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('currentUser', JSON.stringify(newUser));

            showMessage('üéâ Guul! Account-kaaga waa la abuuray!');
            setTimeout(() => {
                window.location.href = 'dashboard.html';
            }, 2000);
        });
    </script>
</body>
</html>